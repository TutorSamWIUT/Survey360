{% extends 'survey/participant_survey.html' %}

{% block title %}Self-Assessment - {{ survey.leader_name }}{% endblock %}

<!-- Override just the header section for self-assessment -->
{% block content %}
<div class="form-container">
    <!-- Form Header -->
    <div class="form-header">
        <h1>Leadership Self-Assessment</h1>
    </div>
    
    <!-- Form Description -->
    <div class="form-description">
        <h2 style="font-size: 20px; margin-bottom: 12px;">Welcome, {{ survey.leader_name }}!</h2>
        <p style="margin-bottom: 8px;">Please complete this self-assessment first before inviting others to participate.</p>
        <p style="margin-bottom: 0; color: #5f6368;">Your honest self-evaluation will provide valuable context for the feedback you receive from others.</p>
        <p style="margin-top: 12px; margin-bottom: 0; color: #5f6368;">Estimated time: 20-25 minutes</p>
    </div>
    
    <!-- Progress Indicator -->
    <div class="progress-indicator">
        <div class="d-flex justify-content-between mb-2">
            <span>Progress</span>
            <span id="progress-text">0%</span>
        </div>
        <div class="progress-bar-custom">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
    </div>
    
    <form method="post" id="survey-form">
        {% csrf_token %}
        
        <!-- Question 1: Relationship (Pre-filled for self-assessment) -->
        <div class="question-card" data-question="1">
            <div class="question-number">Question 1 <span class="required-mark">*</span></div>
            <div class="question-text">What is your relationship to this leader?</div>
            <div class="relationship-options">
                <label class="radio-option">
                    <input type="radio" name="relationship" value="self" checked required>
                    <span>Self</span>
                </label>
            </div>
        </div>
        
        <!-- Questions 2-55: Leadership evaluation -->
        {% load survey_extras %}
        {% for i in "2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55"|make_list %}
        <div class="question-card" data-question="{{ i }}">
            <div class="question-number">Question {{ i }} <span class="required-mark">*</span></div>
            <div class="question-text">
                {% if i == "2" %}This leader communicates a clear vision for the school's future.{% endif %}
                {% if i == "3" %}This leader allocates resources (financial, human, and/or time) to support the school's vision.{% endif %}
                {% if i == "4" %}This leader integrates the school's core values into the daily operations of the campus.{% endif %}
                {% if i == "5" %}This leader ensures diverse stakeholders are respected and represented within the school environment.{% endif %}
                <!-- Add all other questions here -->
            </div>
            <div class="likert-scale">
                {% for value, label in form.q2_response.field.choices %}
                <label class="likert-option">
                    <input type="radio" name="q{{ i }}_response" value="{{ value }}" required>
                    <span>{{ label }}</span>
                </label>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
        
        <!-- Question 56: Strengths -->
        <div class="question-card" data-question="56">
            <div class="question-number">Question 56 <span class="required-mark">*</span></div>
            <div class="question-text">Select and rank your top 5 strengths (5 = highest strength)</div>
            <div class="strength-grid" id="strength-grid">
                {% for value, label in form.strengths.field.choices %}
                <label class="checkbox-option">
                    <input type="checkbox" name="strengths" value="{{ value }}" class="strength-checkbox">
                    <span>{{ label }}</span>
                </label>
                {% endfor %}
            </div>
            <div class="ranking-section" id="strength-ranking" style="display: none;">
                <h6>Rank your selected strengths:</h6>
                <div id="strength-rank-list"></div>
            </div>
        </div>
        
        <!-- Question 57: Opportunities -->
        <div class="question-card" data-question="57">
            <div class="question-number">Question 57 <span class="required-mark">*</span></div>
            <div class="question-text">Select and rank your top 5 opportunities for improvement (5 = highest priority)</div>
            <div class="opportunity-grid" id="opportunity-grid">
                {% for value, label in form.opportunities.field.choices %}
                <label class="checkbox-option">
                    <input type="checkbox" name="opportunities" value="{{ value }}" class="opportunity-checkbox">
                    <span>{{ label }}</span>
                </label>
                {% endfor %}
            </div>
            <div class="ranking-section" id="opportunity-ranking" style="display: none;">
                <h6>Rank your selected opportunities:</h6>
                <div id="opportunity-rank-list"></div>
            </div>
        </div>
        
        <!-- Open-ended Questions -->
        <div class="question-card" data-question="58">
            <div class="question-number">Question 58</div>
            <div class="question-text">What positive behaviors should you CONTINUE doing as a leader?</div>
            <textarea name="continue_doing" class="open-response" rows="4" 
                      placeholder="Reflect on your leadership strengths and what you should keep doing..."></textarea>
        </div>
        
        <div class="question-card" data-question="59">
            <div class="question-number">Question 59</div>
            <div class="question-text">What behaviors should you STOP doing as a leader?</div>
            <textarea name="stop_doing" class="open-response" rows="4" 
                      placeholder="Consider areas where you may need to change your approach..."></textarea>
        </div>
        
        <div class="question-card" data-question="60">
            <div class="question-number">Question 60</div>
            <div class="question-text">What new behaviors should you START doing as a leader?</div>
            <textarea name="start_doing" class="open-response" rows="4" 
                      placeholder="Think about new approaches or skills you want to develop..."></textarea>
        </div>
        
        <!-- Submit Section -->
        <div class="submit-section">
            <span style="color: #5f6368;">Complete your self-assessment to proceed to inviting participants</span>
            <button type="submit" class="submit-btn">Complete Self-Assessment</button>
        </div>
    </form>
</div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
    $(document).ready(function() {
        // Same JavaScript functionality as participant survey
        // ... (copy from participant_survey.html)
    });
</script>
{% endblock %}